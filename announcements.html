<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Campus Hub - Announcements</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f8f9fa;
            color: #1a1a1a;
        }
        
        .announcement-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        
        .urgent-tag {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 0.8; }
            50% { opacity: 1; }
            100% { opacity: 0.8; }
        }
        
        .modal-overlay {
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }
        
        .tag-exam { background-color: #f59e0b; }
        .tag-deadline { background-color: #ef4444; }
        .tag-update { background-color: #3b82f6; }
        .tag-event { background-color: #10b981; }
        .tag-opportunity { background-color: #8b5cf6; }
        
        .dark-mode {
            background-color: #1a1a1a;
            color: #f8f9fa;
        }
        
        .dark-mode .announcement-card {
            background-color: #2d2d2d;
            border-color: #444;
        }
        
        .transition-all {
            transition: all 0.3s ease;
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- Header & Navigation -->
    <header class="sticky top-0 z-50 bg-white shadow-md dark:bg-gray-800 transition-all">
        <div class="container mx-auto px-4 py-3">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <div class="flex items-center">
                        <i class="fas fa-university text-3xl text-indigo-600 dark:text-indigo-400" aria-hidden="true"></i>
                        <span class="ml-2 text-xl font-bold text-gray-800 dark:text-white">Campus Hub</span>
                    </div>
                    <nav class="hidden md:flex space-x-6" aria-label="Main navigation">
                        <a href="Laho.html" class="text-gray-600 hover:text-indigo-600 dark:text-gray-300 dark:hover:text-indigo-400 transition">Home</a>
                        <a href="events.html" class="text-gray-600 hover:text-indigo-600 dark:text-gray-300 dark:hover:text-indigo-400 transition">Events</a>
                        <a href="clubs.html" class="text-gray-600 hover:text-indigo-600 dark:text-gray-300 dark:hover:text-indigo-400 transition">Clubs</a>
                        <a href="announcements.html" class="font-semibold text-indigo-600 dark:text-indigo-400" aria-current="page">Announcements</a>
                        <a href="authPage.html" class="text-gray-600 hover:text-indigo-600 dark:text-gray-300 dark:hover:text-indigo-400 transition">Profile</a>
                    </nav>
                </div>
                <div class="flex items-center space-x-4">
                    <button id="darkModeToggle" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700" aria-label="Toggle dark mode">
                        <i class="fas fa-moon text-gray-600 dark:text-yellow-300" aria-hidden="true"></i>
                    </button>
                    <div class="relative hidden md:block">
                        <input type="text" id="desktopSearch" placeholder="Search announcements..." class="pl-10 pr-4 py-2 rounded-full border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300" aria-label="Search announcements">
                        <i class="fas fa-search absolute left-3 top-3 text-gray-400" aria-hidden="true"></i>
                    </div>
                    <div class="md:hidden">
                        <button id="mobileMenuButton" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700" aria-label="Toggle mobile menu">
                            <i class="fas fa-bars text-gray-600 dark:text-gray-300" aria-hidden="true"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Mobile Menu -->
        <div id="mobileMenu" class="hidden md:hidden bg-white dark:bg-gray-800 shadow-lg transition-all">
            <div class="container mx-auto px-4 py-3">
                <div class="flex flex-col space-y-3">
                    <a href="Laho.html" class="text-gray-600 hover:text-indigo-600 dark:text-gray-300 dark:hover:text-indigo-400 transition">Home</a>
                    <a href="events.html" class="text-gray-600 hover:text-indigo-600 dark:text-gray-300 dark:hover:text-indigo-400 transition">Events</a>
                    <a href="clubs.html" class="text-gray-600 hover:text-indigo-600 dark:text-gray-300 dark:hover:text-indigo-400 transition">Clubs</a>
                    <a href="announcements.html" class="font-semibold text-indigo-600 dark:text-indigo-400" aria-current="page">Announcements</a>
                    <a href="authPage.html" class="text-gray-600 hover:text-indigo-600 dark:text-gray-300 dark:hover:text-indigo-400 transition">Profile</a>
                </div>
                <div class="mt-3 relative">
                    <input type="text" id="mobileSearch" placeholder="Search announcements..." class="w-full pl-10 pr-4 py-2 rounded-full border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300" aria-label="Search announcements">
                    <i class="fas fa-search absolute left-3 top-3 text-gray-400" aria-hidden="true"></i>
                </div>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8">
        <!-- Page Title and Filters -->
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8">
            <div class="mb-4 md:mb-0">
                <h1 class="text-3xl font-bold text-gray-800 dark:text-white">Announcements</h1>
                <p class="text-gray-600 dark:text-gray-300">Stay updated with campus news and important notices</p>
            </div>
            
            <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3 w-full md:w-auto">
                <div class="relative">
                    <select id="categoryFilter" class="appearance-none pl-3 pr-8 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300" aria-label="Filter by category">
                        <option value="all">All Categories</option>
                        <option value="deadline">Deadlines</option>
                        <option value="event">Events</option>
                        <option value="opportunity">Opportunities</option>
                        <option value="club">Club News</option>
                    </select>
                    <i class="fas fa-chevron-down absolute right-3 top-3 text-gray-400" aria-hidden="true"></i>
                </div>
                
                <div class="relative">
                    <select id="sortFilter" class="appearance-none pl-3 pr-8 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300" aria-label="Sort announcements">
                        <option value="newest">Newest First</option>
                        <option value="oldest">Oldest First</option>
                    </select>
                    <i class="fas fa-chevron-down absolute right-3 top-3 text-gray-400" aria-hidden="true"></i>
                </div>
                
                <button id="filterButton" class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:bg-indigo-500 dark:hover:bg-indigo-600" aria-label="Apply filters">
                    <i class="fas fa-filter mr-2" aria-hidden="true"></i> Apply Filters
                </button>
            </div>
        </div>
        
        <!-- Featured Announcements -->
        <div id="featuredSection" class="mb-8">
            <h2 class="text-xl font-semibold text-gray-800 dark:text-white mb-4 flex items-center">
                <i class="fas fa-star mr-2 text-yellow-500" aria-hidden="true"></i> Featured Announcements
            </h2>
            <div class="grid grid-cols-1 gap-4">
                <!-- Featured announcements will be inserted here by JavaScript -->
            </div>
        </div>
        
        <!-- All Announcements -->
        <div>
            <h2 class="text-xl font-semibold text-gray-800 dark:text-white mb-4">All Announcements</h2>
            <div id="announcementsContainer" class="grid grid-cols-1 gap-6">
                <!-- Announcements will be inserted here by JavaScript -->
            </div>
            
            <div class="mt-8 flex justify-center">
                <button id="loadMoreButton" class="px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600" aria-label="Load more announcements">
                    Load More Announcements
                </button>
            </div>
        </div>
    </main>
    
    <!-- Announcement Detail Modal -->
    <div id="announcementModal" class="fixed inset-0 z-50 hidden overflow-y-auto">
        <div class="modal-overlay absolute inset-0"></div>
        <div class="relative min-h-screen flex items-center justify-center p-4">
            <div class="bg-white rounded-xl shadow-2xl max-w-3xl w-full max-h-screen overflow-y-auto dark:bg-gray-800 transition-all">
                <div class="p-6">
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <div id="modalTags" class="flex flex-wrap gap-2 mb-2"></div>
                            <h2 id="modalTitle" class="text-2xl font-bold text-gray-800 dark:text-white"></h2>
                        </div>
                        <button id="closeModalButton" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700" aria-label="Close announcement modal">
                            <i class="fas fa-times text-gray-500 dark:text-gray-300" aria-hidden="true"></i>
                        </button>
                    </div>
                    
                    <div class="flex items-center text-sm text-gray-600 dark:text-gray-400 mb-6">
                        <div class="flex items-center mr-4">
                            <i class="fas fa-user-circle mr-2" aria-hidden="true"></i>
                            <span id="modalAuthor"></span>
                        </div>
                        <div class="flex items-center">
                            <i class="far fa-clock mr-2" aria-hidden="true"></i>
                            <span id="modalDate"></span>
                        </div>
                    </div>
                    
                    <div id="modalContent" class="prose max-w-none text-gray-700 dark:text-gray-300 mb-6"></div>
                    
                    <div id="modalAttachments" class="mb-6">
                        <h3 class="font-semibold text-gray-800 dark:text-white mb-2">Attachments:</h3>
                        <div class="flex flex-wrap gap-3"></div>
                    </div>
                    
                    <div class="border-t border-gray-200 pt-4 dark:border-gray-700">
                        <h3 class="font-semibold text-gray-800 dark:text-white mb-3">Contact Information:</h3>
                        <div id="modalContact" class="flex flex-col space-y-2 text-gray-700 dark:text-gray-300"></div>
                    </div>
                    
                    <div class="mt-6 flex justify-end space-x-3">
                        <button id="saveAnnouncementButton" class="px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600" aria-label="Save announcement">
                            <i class="far fa-bookmark mr-2" aria-hidden="true"></i> Save
                        </button>
                        <button id="shareAnnouncementButton" class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:bg-indigo-500 dark:hover:bg-indigo-600" aria-label="Share announcement">
                            <i class="fas fa-share-alt mr-2" aria-hidden="true"></i> Share
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Mock announcement data
        const announcements = [
            {
                id: 1,
                title: "Final Exam Schedule Released",
                summary: "The final exams for Semester 2 have been published. Check the academic portal for your personalized schedule.",
                author: "Academic Office",
                tags: ["exam", "deadline"],
                timestamp: "2025-05-25T10:30:00Z",
                content: "The full timetable for Semester 2 final exams is now available on the academic portal. Please log in to view your personalized schedule. Exams will begin on June 10th and conclude on June 25th. Remember to bring your student ID to all exams. Any conflicts or special accommodations must be reported to the Academic Office by May 30th.",
                isFeatured: true,
                attachments: [
                    { name: "Exam Schedule.pdf", type: "pdf", url: "#" }
                ],
                contact: "Email: exams@campus.edu | Phone: (555) 123-4567"
            },
            {
                id: 2,
                title: "Campus Career Fair 2025",
                summary: "Annual career fair featuring top employers from various industries. Register now to secure your spot!",
                author: "Career Services",
                tags: ["event", "opportunity"],
                timestamp: "2025-05-20T14:15:00Z",
                content: "We're excited to announce our annual Campus Career Fair will take place on June 5th from 9:00 AM to 4:00 PM in the Student Union Building. Over 100 employers from various industries will be attending, offering internships and full-time positions. Students from all majors are encouraged to attend. Please register in advance through the Career Services portal to secure your spot and upload your resume for employer preview. Business casual attire is recommended.",
                isFeatured: true,
                attachments: [
                    { name: "Participating Companies.pdf", type: "pdf", url: "#" },
                    { name: "Career Fair Tips.pdf", type: "pdf", url: "#" }
                ],
                contact: "Email: careers@campus.edu | Phone: (555) 987-6543"
            },
            {
                id: 3,
                title: "Library Extended Hours During Finals",
                summary: "The main library will be open 24/7 during the final exam period from June 1-25.",
                author: "University Library",
                tags: ["update"],
                timestamp: "2025-05-18T09:45:00Z",
                content: "To support students during finals, the main library will extend its hours to operate 24/7 from June 1st through June 25th. Additional study spaces have been set up on the 2nd floor, and free coffee will be available from 8:00 PM to 2:00 AM. Please remember to keep noise levels down in designated quiet zones. Library staff will be available during regular hours (8:00 AM to 10:00 PM) for assistance.",
                isFeatured: false,
                attachments: [],
                contact: "Email: library@campus.edu | Phone: (555) 456-7890"
            },
            {
                id: 4,
                title: "URGENT: Network Maintenance Tonight",
                summary: "Campus Wi-Fi and online services will be unavailable from 11 PM to 3 AM for critical maintenance.",
                author: "IT Services",
                tags: ["urgent", "update"],
                timestamp: "2025-05-22T16:20:00Z",
                content: "Critical network maintenance is scheduled for tonight from 11:00 PM to 3:00 AM. During this time, all campus Wi-Fi, online portals, and digital services will be unavailable. Please save your work and log out of all systems before 11:00 PM. This maintenance is necessary to upgrade our network infrastructure and improve performance. We apologize for any inconvenience and appreciate your understanding.",
                isFeatured: true,
                attachments: [],
                contact: "Email: itsupport@campus.edu | Phone: (555) 789-0123 (24/7 support)"
            },
            {
                id: 5,
                title: "Photography Club Exhibition",
                summary: "Join us for the annual student photography exhibition this Friday at the Arts Center.",
                author: "Photography Club",
                tags: ["event", "club"],
                timestamp: "2025-05-15T12:00:00Z",
                content: "The Photography Club is proud to present our annual student exhibition this Friday, May 26th, from 5:00 PM to 8:00 PM at the Arts Center Gallery. Over 50 pieces from student photographers will be on display, covering various themes and techniques. Light refreshments will be served. This is a great opportunity to support your fellow students and appreciate their creative work. Admission is free and open to all students, faculty, and staff.",
                isFeatured: false,
                attachments: [
                    { name: "Exhibition Poster.jpg", type: "image", url: "#" }
                ],
                contact: "Email: photo.club@campus.edu | Instagram: @campusphotoclub"
            },
            {
                id: 6,
                title: "Summer Internship Applications Due",
                summary: "Deadline for summer internship applications through the Career Center is May 30th.",
                author: "Career Services",
                tags: ["deadline", "opportunity"],
                timestamp: "2025-05-10T11:10:00Z",
                content: "The deadline to apply for summer internships facilitated through the Career Center is fast approaching. All applications must be submitted by May 30th at 11:59 PM. We have over 200 internship opportunities available across various industries. To apply, visit the Career Center portal, complete your profile, and submit your resume and cover letter for positions of interest. Drop-in resume reviews are available daily from 1:00 PM to 4:00 PM this week.",
                isFeatured: false,
                attachments: [
                    { name: "Internship Guide.pdf", type: "pdf", url: "#" }
                ],
                contact: "Email: internships@campus.edu | Phone: (555) 234-5678"
            },
            {
                id: 7,
                title: "New Mental Health Resources Available",
                summary: "Counseling Services has launched new online resources and support groups for students.",
                author: "Student Wellness Center",
                tags: ["update"],
                timestamp: "2025-05-05T13:25:00Z",
                content: "The Student Wellness Center is pleased to announce new mental health resources available to all students. We've launched an online portal with self-help tools, guided meditation sessions, and educational materials. Additionally, we're offering new support groups focusing on stress management, anxiety, and building resilience. All services are confidential and free of charge. Visit our website to explore the new resources or schedule an appointment with a counselor.",
                isFeatured: false,
                attachments: [
                    { name: "Wellness Resources Guide.pdf", type: "pdf", url: "#" },
                    { name: "Support Group Schedule.pdf", type: "pdf", url: "#" }
                ],
                contact: "Email: counseling@campus.edu | Phone: (555) 345-6789 (24/7 crisis line available)"
            },
            {
                id: 8,
                title: "Computer Science Club Hackathon",
                summary: "Annual 24-hour hackathon hosted by the CS Club - sign up by June 1st!",
                author: "Computer Science Club",
                tags: ["event", "club"],
                timestamp: "2025-05-01T10:05:00Z",
                content: "The Computer Science Club is excited to announce our annual 24-hour Hackathon, taking place on June 15-16 in the Engineering Building. This year's theme is 'Tech for Social Good'. Form teams of 2-4 members and compete to build innovative solutions to real-world problems. Prizes include tech gadgets, internship opportunities, and funding for project development. No experience necessary - workshops will be provided for beginners. Registration closes June 1st.",
                isFeatured: false,
                attachments: [
                    { name: "Hackathon Rules.pdf", type: "pdf", url: "#" },
                    { name: "Past Projects.pdf", type: "pdf", url: "#" }
                ],
                contact: "Email: cs.club@campus.edu | Discord: CampusCSClub"
            }
        ];

        // DOM Elements
        const announcementsContainer = document.getElementById('announcementsContainer');
        const featuredSection = document.getElementById('featuredSection');
        const announcementModal = document.getElementById('announcementModal');
        const closeModalButton = document.getElementById('closeModalButton');
        const loadMoreButton = document.getElementById('loadMoreButton');
        const filterButton = document.getElementById('filterButton');
        const categoryFilter = document.getElementById('categoryFilter');
        const sortFilter = document.getElementById('sortFilter');
        const mobileMenuButton = document.getElementById('mobileMenuButton');
        const mobileMenu = document.getElementById('mobileMenu');
        const darkModeToggle = document.getElementById('darkModeToggle');
        const desktopSearch = document.getElementById('desktopSearch');
        const mobileSearch = document.getElementById('mobileSearch');

        // State
        let displayedAnnouncements = 4;
        let filteredAnnouncements = [...announcements];
        let currentFilters = {
            category: 'all',
            sort: 'newest'
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            renderAnnouncements();
            setupEventListeners();
        });

        // Render announcements
        function renderAnnouncements() {
            // Clear containers
            announcementsContainer.innerHTML = '';
            featuredSection.querySelector('.grid').innerHTML = '';
            
            // Filter and sort announcements
            filterAndSortAnnouncements();
            
            // Render featured announcements
            const featured = filteredAnnouncements.filter(a => a.isFeatured);
            if (featured.length > 0) {
                featured.forEach(announcement => {
                    featuredSection.querySelector('.grid').appendChild(createAnnouncementCard(announcement));
                });
            } else {
                featuredSection.style.display = 'none';
            }
            
            // Render regular announcements
            const regular = filteredAnnouncements.filter(a => !a.isFeatured).slice(0, displayedAnnouncements);
            regular.forEach(announcement => {
                announcementsContainer.appendChild(createAnnouncementCard(announcement));
            });
            
            // Show/hide load more button
            if (filteredAnnouncements.filter(a => !a.isFeatured).length <= displayedAnnouncements) {
                loadMoreButton.style.display = 'none';
            } else {
                loadMoreButton.style.display = 'block';
            }
        }

        // Create announcement card
        function createAnnouncementCard(announcement) {
            const card = document.createElement('div');
            card.className = 'announcement-card bg-white rounded-xl shadow-md overflow-hidden border border-gray-100 dark:bg-gray-800 dark:border-gray-700 transition-all hover:cursor-pointer';
            card.dataset.id = announcement.id;
            
            // Format date
            const date = new Date(announcement.timestamp);
            const formattedDate = date.toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'short', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
            
            // Determine tag colors
            const tagColors = {
                urgent: 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200',
                deadline: 'tag-deadline text-white',
                exam: 'tag-exam text-white',
                event: 'tag-event text-white',
                opportunity: 'tag-opportunity text-white',
                club: 'bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200',
                update: 'tag-update text-white'
            };
            
            // Create tags
            let tagsHTML = '';
            announcement.tags.forEach(tag => {
                const tagClass = tagColors[tag] || 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200';
                tagsHTML += `
                    <span class="text-xs font-semibold px-2 py-1 rounded-full ${tagClass}">
                        ${tag === 'urgent' ? 'ðŸ”” ' : ''}#${tag.charAt(0).toUpperCase() + tag.slice(1)}
                    </span>
                `;
            });
            
            card.innerHTML = `
                <div class="p-6">
                    <div class="flex justify-between items-start">
                        <div>
                            <div class="flex flex-wrap gap-2 mb-2">
                                ${tagsHTML}
                            </div>
                            <h3 class="text-xl font-semibold text-gray-800 dark:text-white mb-2">${announcement.title}</h3>
                        </div>
                        <button class="save-button p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700" data-id="${announcement.id}" aria-label="Save announcement">
                            <i class="far fa-bookmark text-gray-400" aria-hidden="true"></i>
                        </button>
                    </div>
                    
                    <p class="text-gray-600 dark:text-gray-300 mb-4">${announcement.summary}</p>
                    
                    <div class="flex flex-col sm:flex-row sm:items-center justify-between">
                        <div class="flex items-center text-sm text-gray-500 dark:text-gray-400 mb-2 sm:mb-0">
                            <i class="fas fa-user-circle mr-2" aria-hidden="true"></i>
                            <span>${announcement.author}</span>
                        </div>
                        <div class="flex items-center text-sm text-gray-500 dark:text-gray-400">
                            <i class="far fa-clock mr-2" aria-hidden="true"></i>
                            <span>${formattedDate}</span>
                        </div>
                    </div>
                </div>
            `;
            
            // Add click event to open modal
            card.addEventListener('click', (e) => {
                if (!e.target.closest('.save-button')) {
                    openAnnouncementModal(announcement);
                }
            });
            
            return card;
        }

        // Open announcement modal
        function openAnnouncementModal(announcement) {
            // Format date
            const date = new Date(announcement.timestamp);
            const formattedDate = date.toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
            
            // Set modal content
            document.getElementById('modalTitle').textContent = announcement.title;
            document.getElementById('modalAuthor').textContent = announcement.author;
            document.getElementById('modalDate').textContent = formattedDate;
            document.getElementById('modalContent').innerHTML = announcement.content.replace(/\n/g, '<br>');
            
            // Set tags
            const tagsContainer = document.getElementById('modalTags');
            tagsContainer.innerHTML = '';
            
            const tagColors = {
                urgent: 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200 urgent-tag',
                deadline: 'tag-deadline text-white',
                exam: 'tag-exam text-white',
                event: 'tag-event text-white',
                opportunity: 'tag-opportunity text-white',
                club: 'bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200',
                update: 'tag-update text-white'
            };
            
            announcement.tags.forEach(tag => {
                const tagElement = document.createElement('span');
                tagElement.className = `text-xs font-semibold px-2 py-1 rounded-full ${tagColors[tag] || 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200'}`;
                tagElement.textContent = `#${tag.charAt(0).toUpperCase() + tag.slice(1)}`;
                tagsContainer.appendChild(tagElement);
            });
            
            // Set attachments
            const attachmentsContainer = document.getElementById('modalAttachments').querySelector('div');
            attachmentsContainer.innerHTML = '';
            
            if (announcement.attachments.length > 0) {
                announcement.attachments.forEach(attachment => {
                    const attachmentElement = document.createElement('a');
                    attachmentElement.href = attachment.url;
                    attachmentElement.className = 'flex items-center px-3 py-2 bg-gray-100 rounded-lg hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600';
                    attachmentElement.innerHTML = `
                        <i class="fas fa-${attachment.type === 'pdf' ? 'file-pdf' : 'file-image'} mr-2 text-${attachment.type === 'pdf' ? 'red' : 'blue'}-500" aria-hidden="true"></i>
                        <span>${attachment.name}</span>
                    `;
                    attachmentElement.setAttribute('aria-label', `Download ${attachment.name}`);
                    attachmentsContainer.appendChild(attachmentElement);
                });
            } else {
                document.getElementById('modalAttachments').innerHTML = '<p class="text-gray-500 dark:text-gray-400">No attachments available</p>';
            }
            
            // Set contact info
            const contactContainer = document.getElementById('modalContact');
            contactContainer.innerHTML = '';
            
            if (announcement.contact) {
                announcement.contact.split('|').forEach(contact => {
                    const contactElement = document.createElement('div');
                    contactElement.className = 'flex items-center';
                    contactElement.innerHTML = `
                        <i class="fas fa-info-circle mr-2 text-indigo-500" aria-hidden="true"></i>
                        <span>${contact.trim()}</span>
                    `;
                    contactContainer.appendChild(contactElement);
                });
            }
            
            // Show modal
            announcementModal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        // Close announcement modal
        function closeAnnouncementModal() {
            announcementModal.classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        // Filter and sort announcements
        function filterAndSortAnnouncements() {
            // Filter by category
            if (currentFilters.category === 'all') {
                filteredAnnouncements = [...announcements];
            } else {
                filteredAnnouncements = announcements.filter(announcement => 
                    announcement.tags.includes(currentFilters.category)
                );
            }
            
            // Sort
            if (currentFilters.sort === 'newest') {
                filteredAnnouncements.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
            } else {
                filteredAnnouncements.sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp));
            }
        }

        // Setup event listeners
        function setupEventListeners() {
            // Close modal
            closeModalButton.addEventListener('click', closeAnnouncementModal);
            
            // Modal overlay click
            announcementModal.addEventListener('click', (e) => {
                if (e.target === announcementModal) {
                    closeAnnouncementModal();
                }
            });
            
            // Load more button
            loadMoreButton.addEventListener('click', () => {
                displayedAnnouncements += 4;
                renderAnnouncements();
            });
            
            // Filter button
            filterButton.addEventListener('click', () => {
                currentFilters.category = categoryFilter.value;
                currentFilters.sort = sortFilter.value;
                displayedAnnouncements = 4;
                renderAnnouncements();
            });
            
            // Mobile menu toggle
            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
            
            // Dark mode toggle
            darkModeToggle.addEventListener('click', () => {
                document.body.classList.toggle('dark-mode');
                
                // Toggle icon
                const icon = darkModeToggle.querySelector('i');
                if (document.body.classList.contains('dark-mode')) {
                    icon.classList.remove('fa-moon');
                    icon.classList.add('fa-sun');
                } else {
                    icon.classList.remove('fa-sun');
                    icon.classList.add('fa-moon');
                }
            });
            
            // Save announcement (simulated)
            document.addEventListener('click', (e) => {
                if (e.target.closest('.save-button')) {
                    e.stopPropagation();
                    const button = e.target.closest('.save-button');
                    const icon = button.querySelector('i');
                    
                    icon.classList.toggle('far');
                    icon.classList.toggle('fas');
                    icon.classList.toggle('text-gray-400');
                    icon.classList.toggle('text-yellow-400');
                    
                    // Simulate save action
                    const id = button.dataset.id;
                    console.log(`Announcement ${id} saved/unsaved`);
                }
            });
            
            // Share button in modal
            document.getElementById('shareAnnouncementButton').addEventListener('click', () => {
                alert('Share functionality would be implemented here!');
            });

            // Search functionality
            function handleSearch() {
                const searchTerm = this.value.toLowerCase();
                filteredAnnouncements = announcements.filter(announcement => 
                    announcement.title.toLowerCase().includes(searchTerm) ||
                    announcement.summary.toLowerCase().includes(searchTerm) ||
                    announcement.content.toLowerCase().includes(searchTerm) ||
                    announcement.author.toLowerCase().includes(searchTerm)
                );
                displayedAnnouncements = 4;
                renderAnnouncements();
            }

            desktopSearch.addEventListener('input', handleSearch);
            mobileSearch.addEventListener('input', handleSearch);
        }
    </script>
</body>
</html>